<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started with Amanzi &mdash; Amanzi 0.86-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.86-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Amanzi 0.86-dev documentation" href="../index.html" />
    <link rel="next" title="Amanzi Features and Capabilities" href="../capabilities/index.html" />
    <link rel="prev" title="Goals and Approach" href="approach.html" /> 
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: {
        extensions: ["mhchem.js"]
    }
  });
</script>

  </head>
  <body role="document">

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../_static/logo.png" border="0" alt="py4sci"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../capabilities/index.html" title="Amanzi Features and Capabilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="approach.html" title="Goals and Approach"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started with Amanzi</a><ul>
<li><a class="reference internal" href="#downloading">Downloading</a></li>
<li><a class="reference internal" href="#installing">Installing</a></li>
<li><a class="reference internal" href="#input-files">Input Files</a></li>
<li><a class="reference internal" href="#running-amanzi">Running <em>Amanzi</em></a></li>
<li><a class="reference internal" href="#output-files">Output Files</a></li>
<li><a class="reference internal" href="#visualizing-output">Visualizing Output</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="approach.html"
                        title="previous chapter">Goals and Approach</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../capabilities/index.html"
                        title="next chapter">Amanzi Features and Capabilities</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/background/getting_started.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started-with-amanzi">
<h1>Getting Started with Amanzi<a class="headerlink" href="#getting-started-with-amanzi" title="Permalink to this headline">¶</a></h1>
<p>To ease collaboration and make testing more effective, we maintain
installations of <em>Amanzi</em> on a variety of systems at the participating
labs.  If you aren&#8217;t interested in building <em>Amanzi</em> on your own system,
and you would really like to get started quickly with the Akuna
Platform, please inquire about getting an account on one of the
systems that ASCEM supports.</p>
<div class="section" id="downloading">
<h2>Downloading<a class="headerlink" href="#downloading" title="Permalink to this headline">¶</a></h2>
<p><em>Amanzi</em> is an open-source project that is distributed under a BSD license.
To download a tarball of the source, go to the <em>Amanzi</em>
<a class="reference external" href="https://software.lanl.gov/ascem/amanzi/downloads">downloads</a>  page
and following the links.</p>
</div>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>For modern Unix/Linux systems including Mac OSX, building and
installing <em>Amanzi</em> is relatively straightforward process.  The build
process, which is launched by a single script - <strong>bootstrap.sh</strong> -
automatically downloads and builds the required Third Party Libraries
(TPLs), and then builds <em>Amanzi</em> and links it to the TPLs that it
build.  The script can be found under the <em>config</em> subdirectory in the
<em>Amanzi</em> directory tree. However, care must be taken to ensure that
the requirements for the compilers, message passing interface (MPI)
libraries, and the build tool CMake are satisfied.  Details for the
requirements, optional components, and build scripts are provide in
<a class="reference internal" href="../install/building_bootstrap.html#bootstrap"><span class="std std-ref">Quickstart Using Bootstrap</span></a></p>
</div>
<div class="section" id="input-files">
<h2>Input Files<a class="headerlink" href="#input-files" title="Permalink to this headline">¶</a></h2>
<p><em>Amanzi</em> input takes the form of an eXtensible Markup Language
( <a class="reference external" href="http://en.wikipedia.org/wiki/XML">XML</a> )
file with the extension <code class="docutils literal"><span class="pre">*.xml</span></code>.
Although any text editor may be used to create or edit the contents of the file,
an editor that provides XML syntax-highlighting improves readability
and is helpful toward identifying syntax errors.  This feature is
provided in most editors, including, emacs, vi, and gedit.
The following image is an example of XML syntax-highlighting in the
<a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> editor
for Microsoft Windows:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/syntax_highlighting_xml.png"><img alt="../_images/syntax_highlighting_xml.png" class="align-center" src="../_images/syntax_highlighting_xml.png" style="width: 604.2px; height: 183.6px;" /></a>
</div></blockquote>
<p>Although not required by the XML standard or <em>Amanzi</em>, indentation
using tabs and/or spaces is commonly used to indicate the hierarchy of
nested XML elements and improve readibility.  Tabs (8 character width)
are used in the above XML snippet.  <em>Amanzi</em> uses a custom XML
<em>schema</em> to check the input file for inconsistencies in structure with
respect to the configuration expected based on the <em>Amanzi</em> user
guide. Any input errors of this nature are flagged for the user to
correct, and <em>Amanzi</em> does not attempt a numerical flow and/or
transport simulation.  <em>Amanzi</em> XML element and attribute names are
mnemonic, but the user will need to consult the user guide for
important details on file structure and data entry syntax.</p>
</div>
<div class="section" id="running-amanzi">
<h2>Running <em>Amanzi</em><a class="headerlink" href="#running-amanzi" title="Permalink to this headline">¶</a></h2>
<p>After building <em>Amanzi</em>, the executable <code class="docutils literal"><span class="pre">amanzi</span></code> is installed in the specified
<code class="docutils literal"><span class="pre">&lt;prefix&gt;/bin/</span></code> directory.  <em>Amanzi</em> can be run in serial or parallel, but it
always possible to run <em>Amanzi</em> using the parallel job submission script and
simply set the number of processor cores to 1 for a serial run.  On most
desktop, laptop and small cluster systems, the mpirun or mpiexec command
is used</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">-</span><span class="n">n</span> <span class="n">NN</span> <span class="o">&lt;</span><span class="n">prefix</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">amanzi</span> <span class="o">--</span><span class="n">xml_file</span><span class="o">=</span><span class="nb">input</span><span class="o">.</span><span class="n">xml</span> <span class="o">--</span><span class="n">xml_schema</span><span class="o">=&lt;</span><span class="n">prefix</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">amanzi</span><span class="o">.</span><span class="n">xsd</span>
</pre></div>
</div>
<p>The input file is often in the directory that you are running the command
in, while the <em>Amanzi</em> executable and schema generally require full paths.
To discover learn about the options that the amanzi executable supports
you can use the <code class="docutils literal"><span class="pre">--help</span></code> option:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1</span> <span class="o">&lt;</span><span class="n">prefix</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">amanzi</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>gives:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Usage</span><span class="p">:</span> <span class="n">amanzi</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
  <span class="n">options</span><span class="p">:</span>
    <span class="o">--</span><span class="n">help</span>                          <span class="n">Prints</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
    <span class="o">--</span><span class="n">pause</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">debugging</span>           <span class="n">Pauses</span> <span class="k">for</span> <span class="n">user</span> <span class="nb">input</span> <span class="n">to</span> <span class="n">allow</span> <span class="n">attaching</span> <span class="n">a</span> <span class="n">debugger</span>
    <span class="o">--</span><span class="n">echo</span><span class="o">-</span><span class="n">command</span><span class="o">-</span><span class="n">line</span>             <span class="n">Echo</span> <span class="n">the</span> <span class="n">command</span><span class="o">-</span><span class="n">line</span> <span class="n">but</span> <span class="k">continue</span> <span class="k">as</span> <span class="n">normal</span>
    <span class="o">--</span><span class="n">xml_file</span>              <span class="n">string</span>  <span class="n">XML</span> <span class="n">options</span> <span class="n">file</span>
                                   <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="o">--</span><span class="n">xml_file</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="o">--</span><span class="n">xml_schema</span>            <span class="n">string</span>  <span class="n">XML</span> <span class="n">Schema</span> <span class="n">File</span>
                                    <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="o">--</span><span class="n">xml_schema</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="o">--</span><span class="n">print_version</span>         <span class="nb">bool</span>    <span class="n">Print</span> <span class="n">version</span> <span class="n">number</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
    <span class="o">--</span><span class="n">no_print_version</span>              <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="o">--</span><span class="n">no_print_version</span><span class="p">)</span>
    <span class="o">--</span><span class="n">print_tplversions</span>     <span class="nb">bool</span>    <span class="n">Print</span> <span class="n">version</span> <span class="n">numbers</span> <span class="n">of</span> <span class="n">third</span> <span class="n">party</span> <span class="n">libraries</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>
    <span class="o">--</span><span class="n">no_print_tplversions</span>          <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="o">--</span><span class="n">no_print_tplversions</span><span class="p">)</span>
    <span class="o">--</span><span class="n">print_all</span>             <span class="nb">bool</span>    <span class="n">Print</span> <span class="nb">all</span> <span class="n">pre</span><span class="o">-</span><span class="n">run</span> <span class="n">information</span><span class="o">.</span>
    <span class="o">--</span><span class="n">no_print_all</span>                  <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="o">--</span><span class="n">no_print_all</span><span class="p">)</span>
    <span class="o">--</span><span class="n">print_paths</span>           <span class="nb">bool</span>    <span class="n">Print</span> <span class="n">paths</span> <span class="n">of</span> <span class="n">the</span> <span class="n">xml</span> <span class="nb">input</span> <span class="n">file</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">xml</span> <span class="n">schema</span> <span class="n">file</span><span class="o">.</span>
    <span class="o">--</span><span class="n">no_print_paths</span>                <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="o">--</span><span class="n">no_print_paths</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that you can inquire about the version of <em>Amanzi</em> you are currently running (<code class="docutils literal"><span class="pre">--print_version</span></code>),
as well as the versions of the TPLs that it was linked with (<code class="docutils literal"><span class="pre">--print_tplversions</span></code>).</p>
</div>
<div class="section" id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<p><em>Amanzi</em> can produce a variety of output files during a run, and the
actual output is controlled by the sections of the input file.  The
most common output files are the <em>observation</em>, <em>visualization</em> and
<em>checkpoint</em> files.</p>
<p>The checkpoint files are used to restart a computation that was
terminated before the simulation end time.  This could be due to a
limited resource allocation or because several new runs might be
launched with a common steady-state. Thus, checkpoints include all the
information about the current state of the system to restart the
computation (fields, parameters, etc.).</p>
<p>Visualization files for simulations that ran with the unstructured
grid framework, use the <em>eXtensible Data Model Format</em>
(<a class="reference external" href="http://www.xdmf.org/index.php/Main_Page">XDMF</a>) in conjunction
with the <em>Hierarchical Data Format version 5</em>
(<a class="reference external" href="http://hdfgroup.org">HDF5</a>).  This combination provides a standard
set of meta data and data containers to enable the use of several
open-source visualiztion tools.  In particular, the meta data approach
allows visualization tools to load a single file, e.g.,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">plot_data</span><span class="o">.</span><span class="n">VisIt</span><span class="o">.</span><span class="n">xmf</span>
</pre></div>
</div>
<p>where <em>plot</em> was provided as the base_name for visualization in the output
file.  This single file contains <em>include</em> elements that point to
the xmf files that are created at each specified time- or cycle-step.</p>
<p>Observation files include a sequence of outputs taken over a selected
region. The sequence of times is usually specified with a time macro,
and the region is often a point.</p>
</div>
<div class="section" id="visualizing-output">
<h2>Visualizing Output<a class="headerlink" href="#visualizing-output" title="Permalink to this headline">¶</a></h2>
<p>The data that may be selected for observation output, and that is included
in the visualization files is</p>
<blockquote>
<div><ul class="simple">
<li>Volumetric water content [volume water / bulk volume]</li>
<li>Aqueous saturation [volume water / volume pore space]</li>
<li>Aqueous pressure [Pa]</li>
<li>XXX Aqueous concentration [moles of solute XXX / volume water in MKS]
(name formed by string concatenation, given the definitions in &#8220;Phase Definition&#8221; section)</li>
<li>X-, Y-, Z- Aqueous volumetric fluxe [m/s]</li>
<li>MaterialID</li>
<li>Gravimetric water content [volumetric water content * water density / bulk density, in kg/m^3]</li>
<li>Hydraulic Head [ (aqueous pressure - atmospheric pressure)/(rho * gravity) + z ]</li>
<li>Aqueous mass flow rate [ kg/s ] (must use integral functional in the observation)</li>
<li>Aqueous volumetric flow rate [ m^3/s ] (must use integral functional in the observation)</li>
</ul>
</div></blockquote>
<p>Tools such as <a class="reference external" href="http://wci.llnl.gov/codes/visit">VisIt</a> and <a class="reference external" href="http://www.paraview.org">ParaView</a> can read the xmf files visualization files directly.
Instructions on installing and using VisIt and ParaView are included in the appendix.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../capabilities/index.html" title="Amanzi Features and Capabilities"
             >next</a> |</li>
        <li class="right" >
          <a href="approach.html" title="Goals and Approach"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Amanzi Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>